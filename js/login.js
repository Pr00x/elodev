function validateEmail(e){return/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,20}$/.test(e)}function validateUsername(e){var t='!#$%^&*()+=-[]\\\';,/{}|":<>?"',n=t.length;let r;for(r=0;r<n;r++)if(-1!==e.indexOf(t[r]))return!1;return!0}const form=document.querySelector(".login-form");form.addEventListener("submit",e=>{e.preventDefault();const t=new XMLHttpRequest,n=document.querySelector("input[name='usr']").value.trim(),r=document.querySelector("input[name='pw']").value.trim(),a=document.getElementById("err"),i=e=>{a.style.opacity=1,a.textContent=e};if(""===n||""===r)return i("Please fill in all fields.");if(-1!==n.indexOf("@")){if(!validateEmail(n))return i("Please enter the valid email.")}else if(!validateUsername(n))return i("Please enter the valid username.");t.open("POST","/ajax/login.php",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.setRequestHeader("X-Requested-Width","XMLHttpRequest"),t.onreadystatechange=function(){if(4===this.readyState){if(200===this.status&&"success"===this.responseText)return window.location.href="/home.php";a.style.opacity=1,a.textContent=this.responseText}},t.send(`usr=${n}&pw=${r}&_csrf=`+document.querySelector("input[name='_csrf']").value)});
